Configuration options
=====================
CONFIG_RUN_VERIFIED_ONLY: If defined, only variations that are expected to pass on S50 based devices will be run (Note: If you input unsupported blobs, the testcase will still run and fail) [Default: ON]
CONFIG_LARGE_BLOBS_ENABLED: If defined, testcases with large blobs > 2783B will be run (Requires TF-M changes to pass) [Default: OFF]

Prerequisites
=============
- Edgelock 2GO account
- MCUXpresso SDK or Zephyr
- Provisioned RD-RW612-BGA, FRDM-RW612, MCX-N5XX-EVK or MCX-N9XX-EVK board
- Python >= 3.10 with packages from scripts/requirements.txt

Create device specific blobs [EL2GO, Generic tests, RW61x]
==========================================================
1. Obtain a RTP JSON file from EL2GO containing the desired blobs for your board

2. Run the file trough the preprocessor:
scripts/el2go_blob_test_pre.py [RTP_JSON_PATH]

Create device specific blobs [EL2GO, Generic tests, N10]
========================================================
1. Obtain a RTP JSON file from EL2GO containing the desired blobs for your board

2. Connect your board and rewrap all the blobs in the RTP JSON file:
scripts/el2go_blob_rewrap.py [RTP_JSON_PATH] [PROVISIONING_FW_PATH] [COM_PORT] [REWRAPPED_RTP_JSON_OUT_PATH]

3. Run the rewrapped RTP JSON file trough the preprocessor:
scripts/el2go_blob_test_pre.py [REWRAPPED_RTP_JSON_OUT_PATH]

Create device specific blobs [EL2GO, Generic tests, N10 (memory)]
=================================================================
NOTE: This method only works for a maximum of 16 blobs, not exceeding 16KB in total.

1. Create a device group in EL2GO containing the desired blobs for your board

2. Provision the blobs to your board via the el2go-host app from SPSDK (additional_data_address: 0x1C0000):
el2go-host provision-device -p [COM_PORT] --config [CONFIG_PATH] --workspace [WORKSPACE_PATH]

3. Run the RTP JSON file downloaded by el2go-host trough the preprocessor, specifying the memory location method:
scripts/el2go_blob_test_pre.py [WORKSPACE_PATH]/provisionings.json --storage_mode memory --blob_address 0x1C0000

Build and run [MCUXpresso SDK]
==============================
1. Generate the projects:
west sdkgen -b frdmrw612,rdrw612bga,mcxn5xxevk,mcxn9xxevk -p el2go_blob_test_s,el2go_blob_test_ns

2. Build the projects in the following order:
el2go_blob_test_s -> el2go_blob_test_ns

3. Flash both el2go_blob_test_s and el2go_blob_test_ns to your board

Build and run [Zephyr]
======================
1. Build the project:
west build -b [frdm_rw612/rw612/ns|rd_rw612_bga/rw612/ns] [PATH_TO_THIS_DIRECTORY]/../../zephyr/tests/el2go_blob_test

2. Flash both tfm_s and the zephyr app to your board

Postprocessing [JUnit]
======================
If you capure the console output of the test application, you can feed it into the postprocessor to recieve the results in the JUnit format:
scripts/el2go_blob_test_post.py [CONSOLE_OUTPUT_PATH] [JUNIT_OUT_PATH]

Notes on RW61x blobs
====================
- Make sure the lifecycle and OEM Auth Key Hash of your blobs match the one provisioned to the board
- Secure boot needs to be enabled on your board for blob importing to work

Notes on N10 blobs
==================
- Your board needs to be provisioned with an OEM Auth Key Hash and an OEM FW Decryption Key in "OEM Open" lifecycle
- All test blobs MUST be generated with "OEM Open" lifecycle, otherwise the provisioning FW closes the device
- Make sure the OEM Auth Key Hash of your blobs match the one provisioned to the board
